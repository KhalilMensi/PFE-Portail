@inject Microsoft.AspNetCore.Mvc.Localization.IViewLocalizer localizer

<!DOCTYPE html>
<html>
<head>
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

    <title>@ViewBag.Title</title>
    <!-- Bootstrap CSS -->
    <link rel="stylesheet" href="~/assets/bootstrap/bootstrap.min.css">
    <!-- custome CSS -->
    <link rel="stylesheet" href="~/assets/css/style.css">
    <!-- DataTables CSS -->
    <link rel="stylesheet" href="~/assets/datatables/css/dataTables.bootstrap4.min.css" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.5.2/css/bootstrap.css" />
    <!--font-awesome-->
    <link href="https://stackpath.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css" rel="stylesheet" integrity="sha384-wvfXpqpZZVQGK6TAh5PVlGOfQNHSoD2xbE+QkPxCAFlNEevoEH3Sl0sibVcOQVnN" crossorigin="anonymous">

    <style>
        p {
            font-family: 'Poppins', sans-serif;
            font-size: 1.1em;
            font-weight: 300;
            line-height: 1.7em;
            color: #999;
        }

        a, a:hover, a:focus {
            color: inherit;
            text-decoration: none;
            transition: all 0.3s;
        }


        /* ---------------------------------------------------
                        SIDEBAR STYLE
         ----------------------------------------------------- */

        #sidebar {
            background: #7386D5;
            color: #fff;
        }

            #sidebar .sidebar-header {
                padding: 20px;
                background: #6d7fcc;
            }

            #sidebar ul.components {
                padding: 20px 0;
                border-bottom: 1px solid #47748b;
            }

            #sidebar ul p {
                color: #fff;
                padding: 10px;
            }

            #sidebar ul li a {
                padding: 10px;
                font-size: 1.1em;
                display: block;
            }

                #sidebar ul li a:hover {
                    color: #7386D5;
                    background: #fff;
                }

            #sidebar ul li.active > a, a[aria-expanded="true"] {
                color: #6d7fcc;
                background: #fff;
            }


        a[data-toggle="collapse"] {
            position: relative;
        }

        .dropdown-toggle::after {
            display: block;
            position: absolute;
            top: 50%;
            right: 20px;
            transform: translateY(-50%);
        }

        ul ul a {
            font-size: 0.9em !important;
            padding-left: 30px !important;
            background: #6d7fcc;
        }

        ul.CTAs {
            padding: 20px;
        }

            ul.CTAs a {
                text-align: center;
                font-size: 0.9em !important;
                display: block;
                border-radius: 5px;
                margin-bottom: 5px;
            }

        a.download {
            background: #fff;
            color: #7386D5;
        }

        a.article, a.article:hover {
            background: #6d7fcc !important;
            color: #fff !important;
        }

        /* ---------------------------------------------------
                        CONTENT STYLE
                    ----------------------------------------------------- */

        #sidebarCollapse {
            width: 40px;
            height: 40px;
            background: #f5f5f5;
            cursor: pointer;
        }

            #sidebarCollapse span {
                width: 80%;
                height: 2px;
                margin: 0 auto;
                display: block;
                background: #555;
                transition: all 0.8s cubic-bezier(0.810, -0.330, 0.345, 1.375);
                transition-delay: 0.2s;
            }

        .info-box {
            display: block;
            min-height: 90px;
            background: #fff;
            width: 100%;
            box-shadow: 0 1px 1px rgba(0,0,0,0.1);
            border-radius: 2px;
            margin-bottom: 15px
        }


        .line {
            width: 100%;
            height: 1px;
            border-bottom: 1px dashed #ddd;
            margin: 40px 0;
        }

        .info-box-icon {
            border-top-left-radius: 2px;
            border-top-right-radius: 0;
            border-bottom-right-radius: 0;
            display: block;
            float: left;
            height: 90px;
            width: 90px;
            text-align: center;
            font-size: 45px;
            background: rgba(0,0,0,0.2)
        }

        .info-box-content {
            padding: 5px 10px;
            margin-left: 90px
        }

        .info-box-number {
            display: block;
            font-weight: bold;
            font-size: 18px
        }

        .info-box-text {
            display: block;
            font-size: 14px;
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
            text-transform: uppercase
        }

        .bg-aqua {
            background-color: #00c0ef !important;
        }

        a.cart:hover {
            text-decoration: none;
            color: #d60e96;
        }

        a.cart .cart-basket {
            font-size: .6rem;
            position: absolute;
            top: -6px;
            right: -5px;
            width: 15px;
            height: 15px;
            color: #fff;
            background-color: #418deb;
            border-radius: 50%;
        }

        a.cart {
            width: 20px;
            height: 20px;
            right: 25px;
        }
    </style>
</head>
<body>
    <div id="top-content">
        <div class="header-container">
            <!-- Start Header -->
            <header class="top-header">
                <!-- Top menu -->
                <div class="top-menu">
                    <div class="container">
                        <div class="row justify-content-between has-border">
                            <!-- Langauge -->
                            <div class="col-4 col-md-4">
                                <div class="language">
                                    <partial name="_Culture" />
                                </div>
                            </div>
                            <!-- End Langauge -->
                            <!-- Compte -->
                            <div class="col-8 col-md-4">
                                <div class="compte text-right">
                                    @if (@User.FindFirst(claim => claim.Type == System.Security.Claims.ClaimTypes.Role)?.Value == "Admin" || @User.FindFirst(claim => claim.Type == System.Security.Claims.ClaimTypes.Role)?.Value == "User")
                                    {
                                        <a asp-action="ListPurchaseLine" asp-controller="PurchaseLine" class="cart position-relative d-inline-flex" aria-label="View your shopping cart">
                                            <i class="fas fa fa-shopping-cart fa-lg"></i>
                                            <span id="NbPurchaseLine" class="cart-basket d-flex align-items-center justify-content-center">

                                            </span>
                                        </a>
                                    }
                                    <i class="icon-compte"></i>

                                    @if (@User.FindFirst(claim => claim.Type == System.Security.Claims.ClaimTypes.Role)?.Value != null)
                                    {

                                        <a asp-action="Logout" asp-controller="Account">@localizer["LogOut"]</a>
                                    }
                                    else
                                    {
                                        <a asp-action="Login" asp-controller="Account">@localizer["Login"]</a>
                                        <span> / </span>
                                        <a asp-action="UpsertUser" asp-controller="User">@localizer["SignUp"]</a>}
                                </div>
                            </div>
                            <!-- End Compte -->
                        </div>
                        <hr>
                    </div>
                </div>
                <!-- End Top menu -->
                <!-- Main menu -->
                <div class="main-menu">
                    <div class="container">
                        <div class="row">
                            <!-- Logo -->
                            <div class="col-12 col-md-3">
                                <div class="logo">
                                    <a asp-action="Index" asp-controller="Home"><img src="~/images/logo.png" alt="Alkifr" /></a>
                                </div>
                            </div>
                            <!-- End Logo -->
                            <!-- Search Form -->
                            <div class="col-12 col-md-9">
                                <div class="search-bloc clearfix">
                                    <form asp-action="Recherche" asp-route-mode="List" asp-controller="Home" method="post">
                                        <div class="input-search">
                                            <input type="text" name="search" id="search">
                                        </div>
                                        <div class="input-submit">
                                            <button type="submit" class="send-form">@localizer["QuickSearch"]</button>
                                            <a href="" class="search-filter">@localizer["AdvancedSearch"]</a>
                                        </div>
                                    </form>
                                </div>
                            </div>
                            <!-- End Search Form -->
                        </div>
                    </div>
                </div>
                <!-- End Main menu -->
            </header>
            <!-- End Header -->
        </div>
        <div style="background-color:#f0f2f5">
            <div class="container row col-md-12">
                <!-- Sidebar Holder -->
                <nav class="col-md-3 p-2" id="sidebar">
                    <ul class="list-unstyled components">
                        <li>
                            <a href="#homeSubmenuUser" data-toggle="collapse" aria-expanded="false" class="dropdown-toggle">
                                <span class="mr-2">
                                    <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-house-fill" viewBox="0 2 16 16">
                                        <path fill-rule="evenodd" d="m8 3.293 6 6V13.5a1.5 1.5 0 0 1-1.5 1.5h-9A1.5 1.5 0 0 1 2 13.5V9.293l6-6zm5-.793V6l-2-2V2.5a.5.5 0 0 1 .5-.5h1a.5.5 0 0 1 .5.5z" />
                                        <path fill-rule="evenodd" d="M7.293 1.5a1 1 0 0 1 1.414 0l6.647 6.646a.5.5 0 0 1-.708.708L8 2.207 1.354 8.854a.5.5 0 1 1-.708-.708L7.293 1.5z" />
                                    </svg>
                                </span>
                                @localizer["MyAccount"]
                            </a>
                            <ul class="collapse list-unstyled" id="homeSubmenuUser">
                                <li class="@Html.IsActive(actions:"Details", controllers:"User")">
                                    <a href="@Url.Action("Details","User",new { id = -1 })">
                                        <span class="mr-2">
                                            <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-person-circle" viewBox="0 2 16 16">
                                                <path d="M11 6a3 3 0 1 1-6 0 3 3 0 0 1 6 0z" />
                                                <path fill-rule="evenodd" d="M0 8a8 8 0 1 1 16 0A8 8 0 0 1 0 8zm8-7a7 7 0 0 0-5.468 11.37C3.242 11.226 4.805 10 8 10s4.757 1.225 5.468 2.37A7 7 0 0 0 8 1z" />
                                            </svg>
                                        </span>
                                        @localizer["MyAccount"]
                                    </a>
                                </li>
                                <li class="@Html.IsActive(actions:"UpsertUser", controllers:"User")">
                                    <a href="@Url.Action("UpsertUser","User" ,new { id = -1 })">
                                        <span class="mr-2">
                                            <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-person-lines-fill" viewBox="0 2 16 16">
                                                <path d="M6 8a3 3 0 1 0 0-6 3 3 0 0 0 0 6zm-5 6s-1 0-1-1 1-4 6-4 6 3 6 4-1 1-1 1H1zM11 3.5a.5.5 0 0 1 .5-.5h4a.5.5 0 0 1 0 1h-4a.5.5 0 0 1-.5-.5zm.5 2.5a.5.5 0 0 0 0 1h4a.5.5 0 0 0 0-1h-4zm2 3a.5.5 0 0 0 0 1h2a.5.5 0 0 0 0-1h-2zm0 3a.5.5 0 0 0 0 1h2a.5.5 0 0 0 0-1h-2z" />
                                            </svg>
                                        </span>
                                        @localizer["UpdateAccount"]
                                    </a>
                                </li>
                            </ul>
                        </li>
                        <li class="@Html.IsActive(actions:"UserPurchase", controllers:"Purchase")">
                            <a href="@Url.Action("UserPurchase","Purchase")">@localizer["MyPurchases"]</a>
                        </li>

                        <li>
                            <a href="#">
                                <span class="mr-2">
                                    <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-info-circle-fill" viewBox="0 0 16 16">
                                        <path d="M8 16A8 8 0 1 0 8 0a8 8 0 0 0 0 16zm.93-9.412-1 4.705c-.07.34.029.533.304.533.194 0 .487-.07.686-.246l-.088.416c-.287.346-.92.598-1.465.598-.703 0-1.002-.422-.808-1.319l.738-3.468c.064-.293.006-.399-.287-.47l-.451-.081.082-.381 2.29-.287zM8 5.5a1 1 0 1 1 0-2 1 1 0 0 1 0 2z" />
                                    </svg>
                                </span>
                                @localizer["About"]
                            </a>
                            <a href="#">
                                <span class="mr-2">
                                    <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-chat-right-dots" viewBox="0 0 16 16">
                                        <path d="M2 1a1 1 0 0 0-1 1v8a1 1 0 0 0 1 1h9.586a2 2 0 0 1 1.414.586l2 2V2a1 1 0 0 0-1-1H2zm12-1a2 2 0 0 1 2 2v12.793a.5.5 0 0 1-.854.353l-2.853-2.853a1 1 0 0 0-.707-.293H2a2 2 0 0 1-2-2V2a2 2 0 0 1 2-2h12z" />
                                        <path d="M5 6a1 1 0 1 1-2 0 1 1 0 0 1 2 0zm4 0a1 1 0 1 1-2 0 1 1 0 0 1 2 0zm4 0a1 1 0 1 1-2 0 1 1 0 0 1 2 0z" />
                                    </svg>
                                </span>
                                @localizer["ReachOut"]
                            </a>
                        </li>
                    </ul>
                </nav>
                <!-- Page Content Holder -->
                <div class="col-md-9 p-2" id="content">
                    <div>
                        <main role="main">
                            @RenderBody()
                        </main>
                    </div>
                </div>
            </div>
        </div>

        <!-- Footer -->
        <footer class="footer">
            <div class="container">
                <div class="row">
                    <div class="col-12">
                        <div class="menu-footer">
                            <ul>
                                <li>
                                    <a href="#">@localizer["AboutAlFikr"]</a>
                                </li>
                                <li>
                                    <a href="#">@localizer["PrivacyPolicy"]</a>
                                </li>
                                <li>
                                    <a href="#">@localizer["TermsOfUse"]</a>
                                </li>
                            </ul>
                        </div>
                    </div>
                </div>
            </div>
        </footer>
        <!-- End Footer -->
        <!-- End Content -->
    </div>
    <script src="https://code.jquery.com/jquery-3.5.1.js"></script>
    <!-- jQuery first, then Popper.js, then Bootstrap JS -->
    <script src="~/assets/jquery/jquery-3.4.1.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.0/dist/umd/popper.min.js"></script>
    <script src="~/assets/bootstrap/bootstrap.min.js"></script>

    <script>
         var cultureInfo = '@System.Globalization.CultureInfo.CurrentCulture.Name';
          var InvalidInput = '@localizer["InvalidInput"]';
          var AppGlobal = {
               "user" : {
                      "role": "@User.FindFirst(claim=>claim.Type==System.Security.Claims.ClaimTypes.Role)?.Value",
                      "Name" : "@User.FindFirst(claim=>claim.Type==System.Security.Claims.ClaimTypes.Name)?.Value"
               },
           };
        $(document).ready(function () {

            if (AppGlobal.user.role == "User" || AppGlobal.user.role == "Admin") {

                $.ajax({
                    url: '/PurchaseLine/NbPurchaseLine',
                    type: 'post',
                    dataType: 'json',
                    cache: false,
                    success: function (response) {
                        $('#NbPurchaseLine').text(response)
                    },
                    error: function (xhr, error, status) {
                        console.log(error, status);
                    }
                });
            }

            if ($('#homeSubmenuUser > li').hasClass('active')) {
                $('#homeSubmenuUser').collapse()
            }
        });
    </script>

    <!-- DataTables Implementation-->
    <script src="~/assets/datatables/js/jquery.dataTables.min.js"></script>
    <script src="~/assets/datatables/js/dataTables.bootstrap4.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@10"></script>
    <script src="~/assets/js/User.js" asp-append-version="true"></script>

    @RenderSection("Scripts", required: false)

</body>
</html>